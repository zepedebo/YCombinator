A port of the Ruby code from https://youtu.be/FITJMJjASUs to swift
